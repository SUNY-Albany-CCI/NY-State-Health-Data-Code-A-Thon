module.exports = {

  onSocketMessage: function(ewd) {
    var wsMsg = ewd.webSocketMessage;
    var type = wsMsg.type;
    var params = wsMsg.params;
    var sessid = ewd.session.$('ewd_sessid')._value;

    if (type === 'sendHelloWorld') {
      var savedMsg = new ewd.mumps.GlobalNode('%AMessage', []);
      savedMsg._setDocument(wsMsg);
      ewd.log('*** Incoming Web Socket message received: ' + JSON.stringify(wsMsg, null, 2), 1);
      return {savedInto: '%AMessage'};
    }

    if (type === 'getHelloWorld') {
      var savedMsg = new ewd.mumps.GlobalNode('%AMessage', []);
      return savedMsg._getDocument();
    }

    if (type === 'queryNYStateData') {
      var savedMsg = new ewd.mumps.GlobalNode('%NYStateDataTest', []);
      var dataNYState = { text : "test" };
      savedMsg._setDocument(dataNYState);
      ewd.log('*** NYSDATA Incoming Web Socket message received: ' + JSON.stringify(dataNYState, null, 2), 1);
      return {savedInto: '%NYStateDataTest'};
    }

    if (type === 'getNYStateData') {
      var savedMsg = new ewd.mumps.GlobalNode('%NYStateDataTest', []);
      return savedMsg._getDocument();
    }


  }
};

