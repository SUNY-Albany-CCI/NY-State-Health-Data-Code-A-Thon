module.exports = {

  onSocketMessage: function(ewd) {
    var wsMsg = ewd.webSocketMessage;
    var type = wsMsg.type;
    var params = wsMsg.params;
    var sessid = ewd.session.$('ewd_sessid')._value;

    if (type === 'sendHelloWorld') {
      var savedMsg = new ewd.mumps.GlobalNode('%AMessage', []);
      savedMsg._setDocument(wsMsg);
      ewd.log('*** Incoming Web Socket message received: ' + JSON.stringify(wsMsg, null, 2), 1);
      return {savedInto: '%AMessage'};
    }
    if (type === 'getHelloWorld') {
      var savedMsg = new ewd.mumps.GlobalNode('%AMessage', []);
      return savedMsg._getDocument();
    }

  }
};

